{
  "variables": {
    "install_disk_device": "/dev/vda",
    "timezone": "Asia/Tokyo",
    "root_password": "_ROOT_PASSWORD_HERE_",
    "admin_user": "admin",
    "admin_password": "_ADMIN_PASSWORD_HERE_"
  },
  "builders": [{
    "type": "sakuracloud",
    "zone": "is1b",
    "us_keyboard": true,
    "os_type": "iso",
    "user_name": "{{user `admin_user`}}",
    "password": "{{user `admin_password`}}",
    "iso_id": "112801272609",
    "boot_command": [
      "<enter>",
      "<wait10><wait10>",
      "timedatectl set-ntp true<enter><wait>",
      "fdisk {{user `install_disk_device`}}<enter><wait5>",
      "n<enter><wait>",
      "p<enter><wait>",
      "1<enter><wait>",
      "<enter><wait>",
      "+2G<enter><wait>",
      "t<enter><wait>",
      "82<enter><wait>",
      "n<enter><wait>",
      "p<enter><wait>",
      "2<enter><wait>",
      "<enter><wait>",
      "<enter><wait>",
      "w<enter><wait>",
      "mkswap {{user `install_disk_device`}}1<enter><wait5>",
      "swapon {{user `install_disk_device`}}1<enter><wait>",
      "mkfs.ext4 {{user `install_disk_device`}}2<enter><wait10>",
      "mount {{user `install_disk_device`}}2 /mnt<enter><wait>",
      "pacstrap /mnt base<enter><wait>",
      "<wait10><wait10><wait10><wait10><wait10><wait10>",
      "<wait10><wait10><wait10><wait10><wait10><wait10>",
      "<wait10><wait10><wait10><wait10><wait10><wait10>",
      "genfstab -U /mnt >> /mnt/etc/fstab<enter><wait>",
      "arch-chroot /mnt<enter><wait>",
      "ln -s /usr/share/zoneinfo/{{user `timezone`}} /etc/localtime<enter><wait>",
      "systemctl enable dhcpcd.service<enter><wait>",
      "hwclock --systohc<enter><wait>",
      "locale-gen<enter><wait>",
      "echo LANG=en_US.UTF-8 > /etc/locale.conf<enter><wait>",
      "passwd<enter><wait>",
      "{{user `root_password`}}<enter><wait>",
      "{{user `root_password`}}<enter><wait>",
      "useradd -m -g users -G wheel -s /bin/bash {{user `admin_user`}}<enter><wait>",
      "passwd {{user `admin_user`}}<enter><wait>",
      "{{user `admin_password`}}<enter><wait>",
      "{{user `admin_password`}}<enter><wait>",
      "pacman -S os-prober<enter><wait5>y<enter><wait10><wait10>",
      "pacman -S grub<enter><wait5>y<enter><wait10><wait10>",
      "grub-install --target=i386-pc --recheck {{user `install_disk_device`}}<enter><wait>",
      "grub-mkconfig -o /boot/grub/grub.cfg<enter><wait>",
      "pacman -S openssh<enter><wait5>y<enter><wait10><wait10>",
      "systemctl enable sshd<enter><wait>",
      "exit<enter><wait>",
      "umount -R /mnt<enter><wait>",
      "reboot<enter><wait>",
      "<wait10><wait10><wait10>"
    ],
    "boot_wait": "20s"

  }]
}
